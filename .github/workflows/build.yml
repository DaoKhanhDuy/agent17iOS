# ========== CONFIG ========== #

# You just need to follow the instructions to edit this CONFIG section.

# Dont do anything to this env: word.

env:

  # Everything you need to edit just NAME: and LINK: here to build IPA.

  # Name your app here, it must have the same name in your .xcodeproj, .xcarchive, etc. files.

  NAME: AGENT17IOS # Change this.

  # Enter the direct download link for the compressed .xcodeproj, .xcarchive, etc. files (into a .zip file) here.

  LINK: https://my.microsoftpersonalcontent.com/personal/cfe742303ee3e675/_layouts/15/download.aspx?UniqueId=5ad4961c-375b-4649-901a-4924934531e5&Translate=false&tempauth=v1e.eyJzaXRlaWQiOiJjNzgyNGZjMS03YTY2LTQyZTMtYTgyYy1iY2FjNWE0MjA4NmYiLCJhdWQiOiIwMDAwMDAwMy0wMDAwLTBmZjEtY2UwMC0wMDAwMDAwMDAwMDAvbXkubWljcm9zb2Z0cGVyc29uYWxjb250ZW50LmNvbUA5MTg4MDQwZC02YzY3LTRjNWItYjExMi0zNmEzMDRiNjZkYWQiLCJleHAiOiIxNzY3NDY5MzgyIn0.djGaHW32FByjWlmjCUzvCW9cA-jIFNNVClp3blNEXRG66jJ4Z9_gHFynaAd5WkvnLs1idKtDFajgMPxxTziAgoxjMjsJ6MJ3UNfMH5oVqoPZhVluS4ANPpjsy4mT9-hn0-x0DUasmIRgHSMFMTZ82q3a6CxMXfWbQT735Ykro8dfTcKsWErPbC-HzzYdYILm4yaajp6oRbcmwVb4BWVEfnDvXEsy2T8E7Wp5lnNJPVKxMgEqPXcDdOuryCsqJSKFmTkcBhY2Y1ZkFTpF3mWms7i0m2y0PZPDMHhA5hLSH5BP3BuS8SV1PQMflczJzaev37lyfDK2Qey7KQOIveC-0jzaqXFWStNypbdWiTGlkY2r_qM6pQYRdQ3YlyeWGB3qmyE4IpM89PZsrPS5eNELc65Wq5CNlWxH5lueldayLl-JAkvyYbMEDZ74v1hIxkZa3s2of4LH9CQfN2_ohwWgToRlSDhz71SsQH_l5D2AF3T8Bnod0OypM0EEzK3f-k2SenqYQEpkyw4ENuN823tG9g.TLd77e8fcv5Rtr-AdL61oNVRrHH5HsjDuchjLhBK-rU&ApiVersion=2.0 # Change this.

# That's it, just run this .yml file.





















# You don't need to worry about or edit anything below; just follow the instructions for editing the CONFIG section above.

# ========== BUILD ========== #

name: "Build iOS Unsigned IPA"

on: [push]

jobs:

  build_ios:

    runs-on: macos-14

    steps:

      - name: Checkout repository

        uses: actions/checkout@v4

      - name: Build archive and ipaify

        run: |

          set -xe

          wget -O archive.zip "${LINK}"

          unzip -o archive.zip -d .

          xcodebuild -list -project "${NAME}.xcodeproj"

          xcodebuild archive \

            -project "${NAME}.xcodeproj" \

            -scheme "${NAME}" \

            -archivePath "${NAME}.xcarchive" \

            -configuration Release \

            CODE_SIGNING_ALLOWED=NO \

            CODE_SIGNING_REQUIRED=NO

          PATH="${NAME}.xcarchive/Products/Applications"/*.app

          mkdir Payload

          mv ${PATH} Payload/

          zip -r "${NAME}-iOS.ipa" Payload

          mv "${NAME}-iOS.ipa" "${{ runner.temp }}/${NAME}-iOS.ipa"

      - name: Upload application

        uses: actions/upload-artifact@v4

        with:

          name: "${NAME}"

          path: ${{ runner.temp }}/${NAME}-iOS.ipa

          retention-days: 3

# ========== END ========== #
